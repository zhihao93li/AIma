# Web产品需求文档

## 1. 概述
本项目旨在开发一款Web应用，主要功能是帮助用户生成极具创意和嘲讽意味的骂人内容。该应用将通过对接DeepSeek API来实现内容生成，并逐步集成用户认证、积分系统及支付功能。

## 2. 分阶段开发计划

### 2.1 第一期：接入DeepSeek API并实现基本功能
**目标**：实现用户输入参考信息，系统调用DeepSeek API返回骂人内容。

**具体功能**：
- **用户界面**：提供一个对话框供用户输入参考信息。
- **API调用**：根据用户输入的信息调用DeepSeek API生成回复内容，并显示给用户。
- **错误处理**：处理API请求失败的情况（如网络问题、API错误等），并给出友好的提示信息。
- **内容合规**：添加基本的内容审核机制，确保生成内容符合法律法规。
- **使用条款**：添加简单的使用条款和免责声明。

### 2.2 第二期：实现用户登录功能
**目标**：增加用户注册与登录功能。

**具体功能**：
- **邮箱注册与登录**：用户可以直接使用谷歌邮箱授权登录，我建议使用supabase的授权；
- **数据存储**：使用supabase；
- **安全性**：确保数据传输加密，保护用户隐私。
- **用户面板**：简单的用户信息管理界面。

### 2.3 第三期：实现积分消耗与分享赚取积分功能
**目标**：引入积分系统，用户每次使用功能需消耗积分，同时可通过分享获得积分。

**具体功能**：
- **积分规则**：
  - 新用户注册即赠送50个积分。
  - 每次使用功能消耗10个积分。
  - 成功分享链接且有新用户通过分享链接注册，则分享者获得30个积分。
- **分享功能**：允许用户将应用链接分享至社交媒体平台（如Facebook、Twitter）。
- **积分管理**：在用户账户中显示当前积分余额，并记录积分变动历史。
- **防刷机制**：基本的防止恶意刷积分的安全措施。

### 2.4 第四期：实现支付功能
**目标**：为用户提供购买额外积分的功能，支持国际支付。

**具体功能**：
- **支付集成**：选择Stripe作为支付网关，支持多种货币。
- **购买积分**：用户可以购买不同金额的积分包。
- **使用量限制**：根据用户拥有的积分数量控制其使用功能的次数。
- **交易记录**：提供用户支付和积分购买历史记录。

## 3. 非功能性需求

- **安全性**：确保所有数据传输加密，遵守GDPR等相关法规。
- **用户体验**：设计简洁直观的用户界面，保证操作便捷性。
- **性能优化**：确保应用响应速度快，特别是在API请求处理方面。
- **内容合规**：实施内容审核机制，防止生成违法或不当内容。
- **可扩展性**：系统架构设计应考虑未来功能扩展的可能性。

## 4. 技术栈选择

- **前端框架**：Next.js (App Router)
- **样式**：Tailwind CSS + Shadcn UI
- **后端**：Next.js API Routes
- **数据库**：Prisma ORM + PostgreSQL (可通过Vercel或Supabase托管)
- **认证**：NextAuth.js
- **部署**：Vercel
- **其他依赖**：
  - DeepSeek API (内容生成)
  - Stripe (支付处理)

## 5. 开发与部署计划

- **开发环境**：使用Next.js开发环境，支持热重载
- **测试**：基本的单元测试和集成测试
- **CI/CD**：通过Vercel实现自动部署
- **监控**：使用Vercel Analytics监控应用性能和用户行为

## 6. 风险评估

- **API限制**：DeepSeek API可能有调用频率和成本限制，需提前评估并制定应对策略
- **内容风险**：生成的内容可能存在法律风险，需实施有效的内容审核机制
- **用户滥用**：防止用户滥用系统资源或恶意使用功能